# 工具栏

## 文件

![](/home-tools-file-1.jpg)

![](/home-tools-file-2.jpg)

`新建` （`ctrl+n`）、 打开 （`ctrl+o`）即在导入和创建项目中提到的功能。

`保存` （`ctrl+s`）固定会打开窗口选择保存位置。在打开 epub 文件时，可以通过 `ctrl+shift+s` 不确认直接保存。

`近期` 会记录包括新保存的最近 20 个文件。

`关闭` 会在不保存的情况下直接清空所有内容，请谨慎使用。

`导出` 会按目录树的顺序将所有章节合并为一个 txt 文件。保存时会移除首行的 `<h3>` 标签，但其他的 html 标签会保留。

`粘贴封面` 会从剪贴板粘贴封面，同时支持本地图片和网络图片，文件名会固定为 cover 。

`ai 提取` 会从当前章的前 1000 个字符调用 ai 接口提取项目信息并更新右侧。

`重建首页` 会根据右侧项目信息自动生成或更新 `封面简介` 页。

`项目信息` 部分修改均是实时同步，分类输入框有自动提示补全，补全内容来自项目根目录的 `subjects.josn` 文件，默认是起点和刺猬猫的分类，可根据自己的需求补全。

`出版商` 默认选项为起点和刺猬猫，可自由输入新的，保存时会将新的添加到下拉列表中。

## 章节

![](/home-tools-chapter.jpg)

### 章节操作

`选中插入` 和 `删除章节` 同目录树右键菜单， `末尾插入` 则是在目录树的末尾插入一个新章节。

`上传资源` 与 `删除资源` 功能同其名称，资源树内容有选中时 `del` 快捷键也能触发删除。

`清理资源` 会清理所有未使用的资源。

`长度检查` 会统计所有没有子章节的章节的长度，分为 `全部章节` 、 `异常章节` 、 `过长章节` 、 `过短章节` 和 `不连续章节` 5 个内容。判断异常的标准在设置页面可以修改。默认是用平均数，阈值 0.4 。

全部章节是展示所有章节，正常章节绿色、过长章节红色、过短章节橙色。异常章节只展示过长和过短章节，过长章节和过短章节分别只展示对应内容。

不连贯章节是独立的一块内容，它是基于章节编号的连贯判断，比如依次是第 1 章，第 2 章和第 4 章，从 2 到 4 不是连贯的，这里就会展示出第 2 章。需要注意的是，因为一些有分卷的书里每卷都是从第 1 章开始，这里可能会有误报，使用时请注意。

![](/home-chapter-check-length.jpg)

`统一数字` 是将章节标题中的中文数字如 `一` 和全角数字如 `１` 等全部转换为半角数字如 `1` ，统一命名规则。

`标识图片` 是会统计章节内使用的图片数，在章节标题末尾添加 `[x图]` 的标识。

`刷新图标` 是刷新目录树元素图标，拖拽层级后可用该功能刷新图标。因为内部拖拽目前不能实时更新图标，只能先这么手动刷新一下。

`下载图片` 是会将章节里的所有网络图片全部下载到本地并替换。主要是考虑到网络图片可能会失效以及离线查看的需求，但这个功能会导致文件体积变大很多，请按需使用。

### 拆分规则

功能如图所示，可以按两层规则拆分。在导入 txt 文件时默认自动应用，也可点击拆分按钮应用当前文件。和目录树右键菜单里的拆分是一样的功能。

## 文本处理

![](/home-tools-text.jpg)

### 格式化

功能如其名。其中 `删除空行` 和 `删除段前空格` 在拆分章节时会自动应用。

`应用替换规则` 选中时，会应用额外规则页里的自动替换规则替换内容。

### 查找替换

功能如其名。其中替换规则同记事本的同名功能，是先替换当前选中的搜索结果，然后再查找下一个但不执行替换。

快捷键分别为 `ctrl+f` 和 `ctrl+h` ，如果在编辑模式下有选中内容，选中内容会自动替换搜索区域。

均支持正则表达式。还有两个额外规则。

- 可以用 `\n` 指代换行符，替换的内容会从中换行。
- 可以用 `#i` 简化表示数字，可用于如 `第#i章` 替换为 `第#i章 ` 这种在章节编号后添加统一空格或其他内容。

`替换所有章节` 勾选时，除了替换所有章节的全部内容外，还会搜索替换目录树里的章节名，如果有需要修改章节名的部分请注意勾选此选项。

### 样式

这里可以快捷添加一些常用的 html 标签样式，按钮样式效果同名称。

所有样式均有对应的快捷键，鼠标放在上面即可查看，也可看下面的表格。

| 功能 | 快捷键 |
| --- | --- |
| 加粗 | `ctrl+b` |
| 斜体 | `ctrl+i` |
| 下划线 | `ctrl+u` |
| 删除线 | `ctrl+shift+x` |
| 上标 | `ctrl+shift+=` |
| 下标 | `ctrl+=` |
| 标题(h1) | `ctrl+1` |
| 标题(h2) | `ctrl+2` |
| 标题(h3) | `ctrl+3` |
| 标题(h4) | `ctrl+4` |
| 标题(h5) | `ctrl+5` |
| 标题(h6) | `ctrl+6` |

