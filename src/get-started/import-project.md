# 导入或创建项目

打开软件后，可以拖拽 txt 或 epub 到下方区域自动导入打开，也可以点击左上角的打开按钮选择打开，功能是一样。新建按钮是创建一个只有一个空白章节的空项目。

导入 txt 或新建项目会启用默认 css 样式文件 `main.css` 。样式内容可以切换到资源树进行编辑。该文件同时存在于软件根目录，每次打开 app 都是读取的它，可以修改它更改默认样式。

> 章节应用的样式在右侧预览模式文字右边的多选下拉框，可以在这里手动调整要应用哪些样式文件。

![项目结构](/home-import.jpg)

## 导入 txt 

导入 txt 默认会自动拆分章节，规则在章节选项卡内右侧配置，支持双层拆分，拆分后会自动生成目录。

也可以在设置里关闭自动拆分，则只会生成一个章节，txt 的内容会全部放在该章节内。后续可以通过拆分按钮重新拆分。

拆分时会自动移除空行和段前空格，不需要提前处理。

如果在设置里配置了ai 内容并打开了ai 自动提取功能，则拆分结束后会自动取首章前 1000 个字符给 ai 提取名称、作者、描述，并以起点和刺猬猫的分类为基础推测作品所属分类。

![拆分规则](/home-chapter-split.jpg)

## 导入 epub

导入时会先根据 toc 信息生成目录树，没有 toc 信息时会从 spine 提取。

本软件所有图片和 css 资源均设置在与章节 html 同一目录下。在导入一些不在同一目录下的 epub 时，比如章节在 Text ，图片在同一层的 Images 目录时，样式和图片渲染可能会有问题。软件导入时做了一定兼容处理，但是不确保能完全兼容，可能需要手动搜索替换一下相对目录。

**本软件导入 epub 时不会记录原有格式比如每个章节原始 html 文件名、其他元数据等。所以建议备份源文件或改名保存。**

另外有些 epub 包里会有一些没有在 obf 里注册的资源，这些在导入时也会丢失。

