# 编辑

## 目录

目录树所见顺序及层级即为最终效果，可以任意多选拖拽修改层级，也可以在鼠标右键菜单中选择执行操作。根据是单选还是多选内容会有一些不同。具体功能项见图。

如果要修改章节名，选中状态下修改右侧标题栏内容，回车或点击右侧确认按钮均可。另外支持选中状态下按 `f2` 快捷键直接高亮选中标题栏内容进行修改。

插入章节可在右键菜单中插入或点击上方的插入按钮插入。

删除则是有 `del` 快捷键或上面的删除章节按钮两个触发，均会删除当前选中的所有章节。

![](/home-toc-context-menu-single.png)

![](/home-toc-context-menu-multi.png)

## 编辑区

顶部为标题栏，对应左侧目录树里选中的章节名称，修改时不会实时更新，需要回车确认或点击右侧确认按钮，点击取消则是恢复为原来的名称。

编辑区分为编辑模式和预览模式。预览模式即为最终展示效果。

> 目前预览组件不支持太大的内容，如果是没有拆分的整本小说内容切到预览可能会一片空白，这种情况下请先拆分再查看预览。

编辑模式下任意改动均会实时更新，不需要手动保存。

编辑模式下为了方便编辑，去除了文件头和每行的 `<p>` 标签，预览和保存时都会加上。如果有想对每行都设置的样式，修改关联样式文件里的对应 `<p>` 的样式即可。有其他想要使用的 html 标签也可以直接写，均能正常在预览模式查看最终效果。

第一行默认为章节名，用 `<h3>` 标签高亮。修改章节名后会自动替换首行同名内容。

所有没有被 html 标签包住的行，均视为普通一行，在预览和保存时会添加 `<p>` 标签。

编辑模式下支持直接拖拽、 `ctrl+v` 粘贴图片，也可以在右键菜单选择近期图片名称或打开图片浏览窗口预览后选择插入图片。不论哪种方式，图片均会在当前行的下一行单独一行插入。

前两种方式插入图片时，会自动导入图片资源，名称会优先保持原名，如果和已有图片第一名，则会以当前时间戳重命名。

右键菜单中还有一个功能是 `选中拆分为下个章节` ，功能如其名，但是如果选中内容包含一些不可见的特殊字符比如 `\u2029` 这样的特殊字符时可能拆分后原章节内容里删除出问题，使用时请注意检查下。出问题时可以反馈问题并将原始 txt 文件附上，我会检查并增加对特殊字符的支持。

![](/home-edit-context-menu.jpg)

![](/home-edit-select-images.jpg)

## 资源

资源目前分为样式、图片和脚本三种。样式和脚本点击后可在右侧编辑区内修改。图片点击后右侧展示图片内容，当图片尺寸小于预览区大小时会按原大小展示，大于时会缩放至原大小展示。

修改资源名称后，会自动搜索替换所有使用的地址，不需要手动逐一替换。

## 底部状态栏

在目录状态下，会展示总章节数、总字符数和当前字符数。每次点击章节都会刷新，但在编辑区修改内容时不会实时刷新。

在资源状态下，会展示当前资源文件大小，图片会额外展示图片尺寸。

![](/home-resource.png)

![](/home-resource-image-preview.jpg)

